# 自顶向下，逐步求精以及洗衣机的算法设计


### 什么叫做“自顶向下，逐步求精”？
这个词好像是来源于一本书《计算机网络自顶向下方法》。这本书是2009年机械工业出版社出版的图书，作者是库罗斯。本书采用作者独创的自顶向下的方法来讲授计算机网络的原理及其协议。   
概括的说自顶而下是一种逐步求精的设计程序的过程和方法。对要完成的任务进行分解，先对最高层次中的问题进行定义、设计、编程和测试，而将其中未解决的问题作为一个子任务放到下一层次中去解决。这样逐层、逐个地进行定义、设计、编程和测试，直到所有层次上的问题均由实用程序来解决，就能设计出具有层次结构的程序。

所以，首先要求你必须对你所设计的系统有一个全面的理解.然后从顶层开始,连续地逐层向下分解,分解到所有的模块都能用具体的程序运行，这样就能逻辑地构造整个系统。
目前软件开发方法使用最广泛的，当属结构化的方法和面向对象的方法。而其中，结构化程序设计支持“自顶向下, 逐步求精”的程序设计方法。

“自顶向下”的具体内涵是将复杂、大的问题划分为小问题，找出问题的关键、重点所在，然后用精确的思维定性、定量地去描述问题。而“逐步求精”的具体内涵是是将现实世界的问题经抽象转化为逻辑空间或求解空间的问题。复杂问题经抽象化处理变为相对比较简单的问题。经若干步抽象（精化）处理，最后到求解域中只是比较简单的编程问题。

![](https://img-blog.csdn.net/20171130122542055?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveno5NjI5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)





2. 谁是沃斯？

有兴趣的可以了解一下这个方法的由来：

大概是这样的，1971年，著名的瑞士计算机科学家尼古拉斯·沃斯，基于其开发程序设计语言和编程的实践经验，在4月份的 Communications of ACM上发表了论文“通过逐步求精方式开发程序’(Program Development by Stepwise Refinement)，首次提出了“结构化程序设计”(structure programming)的概念。这个概念的要点是：不要求一步就编制成可执行的程序，而是分若干步进行，逐步求精。第一步编出的程序抽象度最高，第二步编出的程序抽象度有所降低……最后一步编出的程序即为可执行的程序。用这种方法编程，似乎复杂，实际上优点很多，可使程序易读、易写、易调试、易维护、易保证其正确性及验证其正确性。

结构化程序设计方法又称为“自顶向下”或“逐步求精”法，在程序设计领域引发了一场革命，成为程序开发的一个标准方法，尤其是在后来发展起来的软件工程中获得广泛应用。有人评价说沃思的结构化程序设计概念“完全改变了人们对程序设计的思维方式”，这是一点也不夸张的。1983年1月，ACM在纪念 Communications of ACM创刊 25周年时，从其 1／4个世纪发表的大量论文中评选出有“里程碑意义的研究论文” 25篇，每年1篇，沃思的这篇论文就是其中之一。




3. “自顶向下，逐步求精”的方法有什么用处？

个人认为学习并使用“自顶向下，逐步求精”的方法，也就是采用模块分解与功能抽象和分而治之的方法，可以更有效地将一个较复杂的程序系统设计任务分解成许多易于控制和处理的子程序，便于开发和维护。它的重点在于把功能进行分解，也就是说，它是面向过程的。


对我的影响  
原以为这个方法就是个套路，结果将这个方法和我们程序老师编的代码对应时，才发现这个方法厉害了！！ 
我能感受到的这个方法最大的有点就是能让人思路清晰，因为当一个代码很长很复杂时，很容易就会乱了思路，而且流程过于复杂时，就完全不知都自己在干啥了，所以这个方法真的对于编程来说是个很好的指路灯。

举个栗子：
还是说说我的亲身经历，之前老师布置给我们一个作业： 
 
只是一个简单的程序，但是现在看来如果我能学到自顶而下的方法，就不会打出这么乱的代码了：而且这个代码是错误的
 
但是我们老师打出的代码可厉害了，整洁美观还易懂！！抱大腿！！ 


可以看到main程序只有3行，然后逐步细分。

当然，本文并未对面向对象的编程方法进行讨论，也欢迎大家来分享自己的想法。

4. 洗衣机案例

首先确定好洗衣程序的大步骤：

1）输入洗衣参数（洗衣模式）：水位要求与洗衣时间

2）打开上水开关，返回水的高度，当 当前水位=水位要求，关闭开关

3）浸泡

4）电机转动，左右各三圈，返回时间计数，当时间计数=洗衣时间，停止转动

5）打开排水开关，返回水的高度，当 当前水位为零，关闭开关

6）停机

再根据这个来书写伪代码，首先程序的功能：

scanf水位要求、洗衣时间；

while当前水位 < 水位要求：注水；return 当前水位；

浸泡；

while时间计数 < 洗衣时间：电机转动：左三圈、右三圈；return时间计数；

while当前水位 > 0：排水；return当前水位；

exit.

用伪代码描述：
```
READ 用户选择模式    //选择洗衣模式：对应水位，注水时间

REPEAT 
    注水
UNTILL 水位=注水要求   //注水， 水位计计水位 

REPEAT 
    浸泡
UNTILL 时间 = 时间要求   //浸泡， 计时器计时 

WHILE(电机启动时间>0)
    REPEAT 
        电机左转3次
        电机右转3次
        时间-1单位
ENDWHILE                //电机转动, 左3次，右3次

WHILE(水位！=0)
    排水
ENDWHILE                   //排水， 水位计计水位

FOR（脱水时间>0） 
    电机转动 
ENDFOR                     //电机转动（脱水）

关闭电源          //结束
```