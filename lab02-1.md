# 看了这篇博客，你就可以自己写游戏！
### Posted on 2018.09.29
### *本文新手友好，前方引极度舒适。<br/>请非战斗人员迅速撤离，前方高能。*

## ***先展示本教程中游戏最终被做成的效果图：***

![成品展示](http://m.qpic.cn/psb?/V10TJRfP2sMibY/1284dMMQZpVQH4zGeJkPXyg7XiHqgAxLPE*YIJ*LhNo!/b/dDUBAAAAAAAA&bo=5gFvAQAAAAAClzo!&rf=viewer_4)

怎么样？是不是感觉很有意思？

### ***Step No.0 :准备工具***
#### *1.* Construct 2
这是我们将要使用的制作游戏的平台工具。这个游戏编译软件对新手十分友好，上手很容易，虽然功能不会有 unity 等大型游戏引擎的强大，但其易操作易懂的特性的确是不可以被忽视的。即使你不懂代码，不懂编程，只要你有想法，小白也可以通过 Construct 2 创造出有趣的游戏。（别忘了 Construct 2 只支持 Windows 系统。）
<br/>Website:https://www.scirra.com/construct2

#### *2.* 功能健全的浏览器
由于我们制作的是 html5 游戏，它是需要依赖浏览器运行的，所以一个功能健全且运行正常的浏览器必不可少。推荐使用谷歌浏览器 Chrome 、火狐浏览器 Firefox 等。

### ***Step No.1 :找图片素材***
首先，我们要明确，我们做的是一个俯视的垂直视角的设计游戏。于是呢，我们需要找的图片素材，必须有：一个玩家，一个射击的对象（这里我们用一个怪物）。除此之外，我们还要子弹和爆炸的效果图。最后我们不能忘记还要背景哦。这里，我把所需的图片素材放在下面，供你使用。

![Player](https://www.scirra.com/images/articles/player.png)
  

![Monster](https://www.scirra.com/images/articles/monster.png)  
![Bullet](https://www.scirra.com/images/articles/Bullet.png)   

![Explosion](https://www.scirra.com/images/articles/explode.png)   


![Background](https://www.scirra.com/images/articles/bg.png)  
### ***Step No.2 :使用 Construct 2***
#### 新建文件
现在你已设置，启动 Construct 2.单击 File 按钮，然后选择 New.
(“文件”菜单的“新建”按钮。)
你将看到“Template or example”对话框。  

![对话框](https://www.scirra.com/images/articles/newprojdialog65.png)  
这会显示你可以随意调查的示例和模板列表。现在，只需单击框底部的 "Open" 即可创建一个空白的空项目。构造2将为我们将整个项目保存在单个.capx文件中。您现在应该看一个空布局 - 您创建和定位对象的设计视图。想象一下像游戏关卡或菜单屏幕那样的布局。在其他工具中，这可能被称为房间，场景或框架。

#### 插入对象

我们想要的第一件事是重复的背景图块。该平铺背景对象可以为我们做到这一点。在 Step No.1 中可以找到我们需要的背景。

现在，双击布局中的空格以插入新对象。（稍后，如果它已满，你也可以右键单击并选择“ 插入新对象”。）出现“ 插入新对象”对话框后，双击“平铺背景”对象将其插入。  
![图像表](https://www.scirra.com/images/articles/insertobject.png)

单击 "Load a image from a file"

将出现一个十字准线，指示放置对象的位置。单击布局中间附近的某个位置。在纹理编辑器会立即打开，你输入的纹理瓷砖。让我们导入您之前保存的图块图像。单击文件夹图标以从磁盘加载纹理，找到将文件下载到的位置，然后选择它。
从文件加载纹理
单击右上角的X关闭纹理编辑器。如果系统提示您，请务必保存！现在，您应该在布局中看到平铺的背景对象。让我们调整它以覆盖整个布局。确保选中它，然后左侧的属性栏应显示对象的所有设置，包括其大小和位置。将其位置设置为0,0（布局的左上角），并将其大小设置为1280,1024（布局的大小）。  
![平铺背景属性](https://www.scirra.com/images/articles/tiledproperties.png)

让我们来看看我们的工作。按住控件并向下滚动鼠标滚轮以缩小。或者，单击视图 - 缩小几次。您还可以按住空格或鼠标中键来平移。整洁，对吧？您的平铺背景现在应覆盖整个布局：  
![图像](https://www.scirra.com/images/articles/tiledui.jpg)

#### 添加图层
好的，现在我们要添加更多对象。但是，我们会不小心选择平铺的背景，除非我们锁定它，使其无法选择。事实上，使用分层系统可以来做到这一点。
布局可以包含多个图层，您可以使用这些图层对对象进行分组。想象一下像玻璃板堆叠在一起的层，每个板上都涂有物体。它允许您轻松地排列哪些对象出现在其他对象之上，并且可以隐藏，锁定图层，应用视差效果等等。例如，在这个游戏中，我们希望所有内容都显示在平铺背景之上，因此我们可以在其他对象的顶部创建另一个图层。

要管理图层，请单击"Layouts"选项卡，该选项卡通常位于"Projects"栏旁边：  
![Projects](https://www.scirra.com/images/articles/layerstab.png)  

你应该在列表中看到第 0 层（构造 2 从零开始计数，因为它在编程时效果更好）。单击铅笔图标并将其重命名为 Background ，因为它是我们的背景图层。现在单击绿色的加号图标为我们的其他对象添加新图层。我们称之为一个 Main.  
最后，如果单击 "Background" 旁边的小挂锁图标，它将被锁定。这意味着您将无法选择任何内容。这对我们的平铺背景非常方便，这很容易被意外选择，不需要再次被选中。但是，如果你需要进行更改，只需再次单击挂锁即可解锁。
现在，确保在图层栏中选择了 "Main" 图层。这很重要，因为所选图层是活动图层。所有新插入的对象都插入到活动层中，因此如果未选中，我们将意外插入到错误的层。活动图层显示在状态栏中，在放置新对象时也会显示在工具提示中，这个需要特别关注。

#### 添加输入对象
将注意力转回布局。双击以插入另一个新对象。这次，选择Mouse对象，因为我们需要鼠标输入。对 Keyboard 对象再次执行相同操作。

注意：这些对象不需要放置在布局中。它们是隐藏的，并自动在项目范围内工作。现在我们项目中的所有布局都可以接受鼠标和键盘输入。  
对于每个对象，我们将使用精灵对象。它只显示一个纹理，您可以移动，旋转和调整大小。游戏通常主要由精灵对象组成。让我们将上述四个对象中的每一个作为精灵对象插入。该过程类似于插入平铺背景：

1. 双击以插入新对象。
2. 双击 "Sprite" 对象。
3. 当鼠标变为十字准线时，单击布局中的某个位置。工具提示应为 "Main". （请记住这是活动布局。）
4. 弹出纹理编辑器。单击打开图标，然后加载四个纹理中的一个。
5. 关闭纹理编辑器，保存更改。您现在应该在布局中看到对象！

注意：另一种插入精灵对象的快捷方法是将图像文件从 Windows 拖放到布局区域。构造 2 将为您创建具有该纹理的 Sprite. 一定要一次拖动每个图像 - 如果你一次拖动所有四个图像， Construct 2 将生成一个带有四个动画帧的精灵。

将子弹和爆炸精灵移动到布局边缘的某个位置 - 我们不希望在游戏开始时看到它们。

这些对象将被称为 Sprite ， Sprite2 ， Sprite3 和 Sprite4 。这不是很有用 - 事情会很快像这样混淆。根据需要将它们重命名为 Player， Monster， Bullet和 Explosion。您可以通过选择对象，然后更改属性栏中的 Name 属性来执行此操作：  
![](https://www.scirra.com/images/articles/objectname.png)

#### 添加行为
行为是 Construct 2中的预打包功能。例如，您可以向对象添加平台行为，并将 Solid 行为添加到地板，您可以立即像平台游戏一样跳转。你可以在事件中做同样的事情，但这需要更长的时间，如果行为已经足够好，那就没有意义了！那么让我们来看看我们可以使用哪些行为。其中， Construct 2有这些行为;

- 8 Direction movement.这使您可以使用箭头键移动对象。它会很好地适应玩家的运动。
- Bullet movement. 这只是以当前角度向前移动一个物体。它对玩家的子弹很有用。尽管有这个名字，它也可以很好地移动怪物 - 因为所有的移动都是以某种速度向前移动物体。
- Scroll to.这使得屏幕在移动时跟随对象（也称为滚动）。这对玩家有用。
- Bound to layout. 这将停止一个物体离开布局区域。这对玩家也很有用，所以他们不能在游戏区域外游荡！
- destroy outside layout. 而不是停止离开布局区域的对象，如果它停止，则会破坏它。它对我们的子弹很有用。没有它，子弹将永远飞离屏幕，总是占用一点内存和处理能力。相反，我们应该在他们离开布局后销毁子弹。
- Fade. 这逐渐使物体淡出，我们将用于爆炸。

让我们将这些行为添加到需要它们的对象中。

如何添加行为  
让我们为玩家添加8方向移动行为。单击播放器以选择它。在属性栏中，请注意 "behaviors" 类别。单击 "Add/edit". 播放器的 "Behaviors" 对话框将打开。
![](https://www.scirra.com/images/articles/openbehaviors.png)

打开 "behaviors" 对话框。  
单击行为对话框中的绿色“添加行为”图标。双击8方向移动以添加它。
![](https://www.scirra.com/images/articles/add8dir.png)

添加8方向运动。  
再次执行相同操作，这次添加 Scroll To 行为，使屏幕跟随播放器，以及绑定到布局行为，以使它们保持在布局中。行为对话框现在应如下所示：  
![](https://www.scirra.com/images/articles/playerbehaviors_2.png)

添加了所有三种行为的播放器。  
关闭行为对话框。点击 "Run" 尝试游戏！

希望您安装了 HTML5 兼容的浏览器。否则，请确保获得最新版本的 Firefox 或 Chrome 或 Internet Explorer 9（如果您使用的是 Vista及更高版本）。游戏运行后，请注意您已经可以使用箭头键移动，屏幕跟随播放器！由于绑定布局行为，您也无法走出布局区域。这就是行为的好处 - 快速添加常见功能。我们将很快使用事件系统来添加自定义功能。

添加其他行为  
我们可以通过相同的方法向其他对象添加行为 - 选择它，单击添加/编辑以打开行为对话框，并添加一些行为。让我们添加其他行为：

- 将 Bullet 移动和 Destroy 外部布局添加到 Bullet 对象。
- 将子弹移动添加到 Monster 对象（因为它也向前移动）。
- 将 Fade 行为添加到 Explosion 对象（因此它逐渐消失）出现后）。默认情况下，淡化行为也会在淡出淡出后破坏对象，这也使我们不必担心隐藏的爆炸对象会堵塞游戏。

如果你运行游戏，你可能会注意到唯一不同的是，你可以看到任何怪物突然快速射击。让我们慢慢放松一下。选择 Monster 对象。请注意，自从我们添加了一个行为后，属性栏中出现了一些额外的属性：

子弹行为属性  
这允许我们调整行为的工作方式。将速度从400更改为80（这是以每秒行进的像素数为单位）。   
![](https://www.scirra.com/images/articles/bulletproperties.png)

同样，将Bullet对象的速度更改为600，将 Explosion 对象的淡入淡出行为的淡出时间更改为0.5（即半秒）。

创造一些更多的怪物  
按住控件，单击并拖动 Monster 对象。你会注意到它产生了另一个实例。这只是Monster 对象类型的另一个对象。

对象类型本质上是对象的“类”。在事件系统中，您主要处理对象类型。例如，您可能会发生一个 "Bullet与Monster碰撞" 的事件。这实际上意味着“ 所述的任何实例子弹对象类型与碰撞所述的任何实例怪物对象类型 ” -相对于具有使一个单独的事件为每一个妖怪。使用 Sprite，对象类型的所有实例也共享相同的纹理。这对于提高效率非常有效 - 当玩家在线玩游戏时，不需要为8个怪物下载8个怪物纹理，他们只需要下载一个怪物纹理，Construct 2重复8次。我们将详细介绍对象类型与以后的实例。现在，一个很好的例子可以考虑不同类型的敌人是不同的对象类型，然后实际的敌人本身（可能有几个）是这些对象类型的实例。

使用 control + drag ，创建7或8个新怪物。不要放置太靠近玩家，否则他们可能会立即死亡！如果有帮助，您可以使用控制+鼠标滚轮向下缩小，并将它们分布在整个布局上。你最终会得到类似的东西。

布局中有几个怪物。
现在是时候通过 Construct 2 的可视化编程方法 - 事件系统来添加我们的自定义功能。  
![](https://www.scirra.com/images/articles/severalghosts.png)

#### 活动
首先，单击顶部的“ 事件表1”选项卡以切换到“ 事件”表编辑器。事件列表称为事件表，您可以为游戏的不同部分或组织设置不同的事件表。事件表还可以“包含”其他事件表，例如，允许您在多个级别重用事件，但我们现在不需要它。  
![](https://www.scirra.com/images/articles/eventsheettab.png)

事件表选项卡。  
关于活动
正如空白工作表中的文字所示，Construct 2每个tick都会在事件表中运行一次。大多数显示器每秒更新其显示器 60 次，因此 Construct 2将尝试匹配最平滑的显示器。这意味着事件表通常每秒运行 60 次，每次都重新绘制屏幕。这就是刻度线 - 一个单元“运行事件然后绘制屏幕”。

事件从上到下运行，因此事件表顶部的事件首先运行。

条件，行动和子事件  

事件由条件组成，测试是否满足某些条件，例如“空格键是否已关闭？”。如果满足所有这些条件，则事件的所有操作都会运行，例如“创建项目符号对象”。运行后，任何子事件也会运行 - 然后可以测试更多条件，然后运行更多操作，然后运行更多子事件，等等。使用此系统，我们可以为我们的游戏和应用程序构建复杂的功能。但是，我们不需要本教程中的子事件。

让我们再说一遍。简而言之，事件基本上如下所示：

是否符合所有条件？  
 --->  是：运行所有事件的动作。  
--->  否：转到下一个事件（不包括任何子事件）。

这有点过于简单了。Construct 2提供了许多事件功能，可以涵盖您可能需要执行的许多不同操作。但是，就目前而言，这是一个思考它的好方法。

你的第一个活动  
我们想让玩家总是看着鼠标。我们完成后会看起来像这样：  
![](https://www.scirra.com/images/articles/alwayslookatmouse.png)

完成的活动。
记住每次绘制屏幕时都会运行刻度线，因此如果我们让每个刻度线都让玩家面向鼠标，它们将始终面向鼠标。

让我们开始制作这个活动。双击事件表中的空格。这将提示我们为新事件添加条件。
![](https://www.scirra.com/images/articles/newevent_2.png)  

“新建事件”对话框。
不同的对象具有不同的条件和动作，这取决于它们可以做什么。还有System对象，它表示Construct 2的内置功能。双击 System对象，如图所示。然后，该对话框将列出所有 System 对象的条件： 

![](https://www.scirra.com/images/articles/everytickcnd.png)  
选择'Every tick'。
双击的每个标记的条件，将其插入。对话框将关闭并创建事件，不执行任何操作。它现在应该是这样的：
![](https://www.scirra.com/images/articles/everytickempty.png)  

空的'Every tick'事件。  
现在我们要添加一个动作让玩家看一下鼠标。单击事件右侧的“ 添加操作”链接。（确保您获得添加操作链接，而不是其下方的添加事件链接，这将再次添加完整的不同事件。）将出现“添加操作”对话框：

“添加操作”对话框。  
与添加事件一样，我们有相同的对象列表可供选择，但这次是添加操作。尽量不要在添加条件和添加操作之间感到困惑！如图所示，双击该播放器的对象，因为这是我们要看看鼠标的玩家。将显示Player对象中可用的操作列表：  
![](https://www.scirra.com/images/articles/playersetanglepos.png) 

玩家'设置角度朝向位置'动作。  
注意玩家的8方向移动行为如何有自己的动作。不过，我们暂时不需要担心。

不是将玩家的角度设置为多个度数，而是使用设置角度朝向位置动作很方便。这将自动计算从玩家到给定的X和Y坐标的角度，然后将对象的角度设置为该角度。双击 “ 设置角度朝向位置”操作。

构造2现在需要知道X和Y坐标以指向玩家：
![](https://www.scirra.com/images/articles/setangleposparams.png)  

设置角度朝向位置参数。  
这些被称为动作的参数。条件也可以有参数，但每个tick不需要任何参数。

我们想要将角度设置为鼠标位置。Mouse对象可以提供此功能。输入Mouse.X为X，和Mouse.Y为ÿ。这些被称为表达式。它们就像计算的总和。例如，您也可以输入Mouse.X + 100或sin（Mouse.Y）（尽管这些特定示例可能不太有用！）。这样，您可以使用来自任何对象或任何计算的任何数据来计算操作和条件中的参数。它非常强大，是Construct 2灵活性的一大隐藏源。

您是否收到“鼠标不是对象名称”的错误？确保添加了Mouse对象！返回第2页并在“添加输入对象”下查看。

您可能想知道如何记住您可以输入的所有可能表达式。幸运的是，你应该看到浮在它上面的“对象面板”。默认情况下，它会逐渐消失，因此不会分散您的注意力。

对象面板。  
将鼠标悬停在它上面，或点击它，它将变得完全可见。这可以作为您可以使用的所有表达式的字典，包括描述，以帮助您记住。如果双击某个对象，则会看到列出的所有表达式。如果双击表达式，它也会为您插入表达式，从而使您无需键入表达式。

无论如何，单击参数对话框上的完成。动作被添加了！  
如您所见，它应该如下所示：  
![](https://www.scirra.com/images/articles/alwayslookatmouse.png)

完成的活动。  
这是你的第一个活动！尝试运行游戏，玩家现在可以像以前一样移动，但总是面向鼠标。这是我们的第一个自定义功能。

#### 添加游戏功能
如果每个事件都像以前一样详细描述，那么这将是一个相当长的教程。让我们为下一个事件做一些简短的描述。请记住，添加条件或操作的步骤如下：

1. 双击以插入新事件，或单击“ 添加操作”链接以添加操作。
2. 双击条件/操作所在的对象
3. 双击所需的条件/操作。
4. 输入参数（如果需要）。

从现在开始，事件将被描述为对象，然后是条件/操作，后跟任何参数。例如，我们刚刚插入的事件可以写成：

添加条件系统   
  ---> 每个刻度  
添加动作播放器  
  ---> 设置角度朝向位置 ---> X：Mouse.X，Y：Mouse.Y

让玩家开枪  
当玩家点击时，他们应该射击子弹。这可以通过Spawn中的对象动作来完成，该动作在相同的位置和角度创建对象的新实例。我们之前添加的Bullet运动将使它向前飞出。举办以下活动：

条件：鼠标 - > 单击 - >左键单击（默认值）    
操作：播放器 - >生成另一个对象 - >对于对象，选择Bullet对象。对于Layer，放1（“Main”层是第1层 - 记住Construct 2从零开始计数）。将图像点保留为0。

您的活动现在应该如下所示：
![](https://www.scirra.com/images/articles/spawnbullet1.png)

幽灵射击活动2。  
如果你运行游戏，你会注意到子弹从玩家中间射击，而不是从枪尾射出。让我们通过在枪的末端放置一个图像点来解决这个问题。（图像点只是图像上可以从中生成对象的位置。）

右键单击项目或对象栏中的播放器，然后选择“ 编辑动画”。

编辑播放器的动画。  
播放器的图像编辑器重新出现。单击原点和图像点工具：  
![](https://www.scirra.com/images/articles/imagepointstool.png)  
原点和图像点工具。  
并打开点对话框：
图像点对话框。
请注意，对象原点显示为红点。这是对象的“热点”或“枢轴点”。如果旋转对象，它会围绕原点旋转。我们想要添加另一个图像点来表示枪，所以单击绿色添加按钮。出现蓝点 - 这是我们的新图像点。在玩家枪的末端单击鼠标左键，将图像点放在那里：   
![](https://www.scirra.com/images/articles/placingimagepoint.png)  

将图像点放在玩家枪的末端。  
关闭图像编辑器。双击我们之前添加的Spawn对象操作，并将Image点更改为1。（原点始终是第一个图像点，并记住Construct 2从零开始计数。）现在该事件应如下所示 - 请注意它现在显示为Image point 1：

编辑过的活动。  
运行游戏。子弹现在从枪的末端射击！然而，子弹还没有做任何事情。但是，希望您开始意识到，一旦掌握了事件系统，您就可以非常快速地将功能集中在一起。

让子弹杀死怪物。  
添加以下事件：

条件：子弹 - > 与另一个物体碰撞 - >选择怪物。  
动作：怪物 - > 摧毁  
动作：子弹 - >生成另一个对象 - > 爆炸，第1层  
动作：子弹 - > 摧毁  

爆炸效果  
运行游戏，尝试射击怪物。哎呀，爆炸有那么大的黑色边框！

爆炸没有效果  
你可能从一开始就预测它会像那样，并且想知道我们的游戏是否真的会像这样结束！别担心，它不会。单击右下角的对象栏中的Explosion对象，或单击项目栏（带有图层栏的选项卡）。其属性显示在左侧的属性栏中。在底部，将其Blend mode属性设置为 Additive。现在再试一次游戏。  
![](https://www.scirra.com/images/articles/explosionadditive.png)

爆炸具有累加效应。    
为什么这样做？在不进入螺母和螺栓的情况下，将普通图像粘贴在屏幕顶部。利用加性效应，每个像素被添加（如在其中，求和）与其后面的背景像素。黑色是零像素值，因此不添加任何内容 - 您没有看到黑色背景。更亮的颜色会增加更多，所以显得更强烈。它非常适合爆炸和灯光效果。

使怪物变得更聪明  
现在，怪物只是偏离布局向右。让我们让它们变得更有趣。首先，让我们以随机的角度开始它们。

条件：系统 - > 开始布局  
动作：怪物 - > 设置角度 - >随机（360）

本教程的第4项。
当他们离开布局时，他们仍会永远徘徊，再也不会被人看到。让我们把它们留在里面。我们要做的是当他们离开布局时将他们指回玩家。这样做有两件事：它们总是留在布局中，如果玩家静止不动，怪物就会出现在他们面前！

条件：怪物 - > 外部布局  
动作：怪物 - > 设置角度朝向位置 - >对于X，Player.X - 对于Y，Player.Y。

运行游戏。如果你闲逛了一会儿，你会注意到怪物也会在布局周围停留，他们会走向各种各样的方向。这不是人工智能，但它会做到！

现在，假设我们想要在它死前五次射击怪物，而不是像现在这样瞬间死亡。我们怎么做？如果我们只存储一个“健康”计数器，那么一旦我们击中一个怪物五次，所有的怪物都会死亡。相反，我们需要每个怪物记住自己的健康。我们可以用实例变量做到这一点。

#### 实例变量
实例变量允许每个怪物存储自己的健康值。变量只是一个可以改变（或变化）的值，它们是为每个实例单独存储的，因此是名称实例变量。

让我们为我们的怪物添加一个健康实例变量。单击项目栏或对象栏中的怪物。或者，您可以切换回布局并选择怪物对象。这将在属性栏中显示怪物的属性。点击添加/编辑通过编辑变量。  
![](https://www.scirra.com/images/articles/instvars.png)  

添加新的实例变量。  
将出现“实例变量”对话框。它看起来类似于我们之前看到的“行为”对话框，但它允许您添加和更改对象的实例变量。单击绿色的“ 添加”按钮以添加新按钮。  
![](https://www.scirra.com/images/articles/healthinstvar.png)

添加 'health' 实例变量。  
在弹出的对话框中，键入health作为名称，将Type保留为Number，对于Initial value，输入5（如图所示）。这启动了5个生命中的每个怪物。当它们被击中时，我们将从健康状态中减去1，然后当健康状态为零时，我们将摧毁该物体。

完成后，单击“确定”。请注意，变量现在出现在实例变量对话框中，也出现在怪物的属性中。（您可以在属性栏中快速更改初始值，但要添加或删除您需要单击“ 添加/编辑”链接所需的变量。）  
![](https://www.scirra.com/images/articles/healthadded.png)

健康实例变量现在已添加到怪物中。

改变事件  
切换回活动表。现在，一旦子弹击中它们，我们就会摧毁怪物。让我们改变它从健康状况中减去1。

找到事件：Bullet - 与Monster碰撞。请注意，我们有一个“摧毁怪物”动作。让我们用“从健康中减去1”来代替它。右键单击“destroy monster”操作，然后单击“ 替换”。  
![](https://www.scirra.com/images/articles/replaceaction.png)

替换动作。  
出现相同的对话框，好像我们正在插入一个新动作，但这次它将取代我们点击的动作。选择Monster - > Subtract from（在Instance variables category中）- > Instance变量“health”，并为Value输入1。单击完成。该动作现在应该如下所示：

从怪物的健康中减去1。  
现在，当我们射击怪物时，它们会失去1点生命值，子弹会爆炸，但是当它们的生命值达到零时，我们还没有杀死怪物。添加另一个事件：

条件：怪物 - >比较实例变量 - >健康，更少或相等，0   
动作：怪物 - >生成另一个对象 - >爆炸，第1层  
动作：怪物 - >摧毁  
![](https://www.scirra.com/images/articles/monsternohealth.png)

完成的活动。  
为什么“小于或等于0”而不是“等于0”？假设我们添加了另一个更强大的武器，从健康中减去2。当你打出了怪兽，它的健康会去5，3，1，-1，-3 ......在任何时候通知是它的健康直接等于零，所以它永远不会死！因此，最好使用“少或平等”来测试健康状况是否已经用完。

运行游戏。你现在必须击中怪物五次才能杀死他们！

保持得分  
让我们得分，让玩家知道他们做得多好。我们需要另一个变量。您可能会认为“让我们将得分作为玩家的实例变量之一！”。这不是一个糟糕的第一个想法，但请记住，值存储在对象中。如果没有实例，也没有变量！因此，如果我们摧毁了玩家，我们就无法再分辨出他们的分数，因为它被玩家摧毁了。

相反，我们可以使用全局变量。与实例变量一样，全局变量（或仅“全局”）可以存储文本或数字。每个变量可以存储单个数字或单个文本。全局变量也适用于所有布局的整个游戏 - 如果我们要添加其他级别，则非常方便。

右键单击事件表底部的空间，然后选择“ 添加全局变量”。

![](https://www.scirra.com/images/articles/addglobal.png)

添加全局变量。  
输入Score作为名称。其他字段默认值为OK，它将使其成为从0开始的数字。  

![](https://www.scirra.com/images/articles/addglobalscore.png)

添加分数全局。  
现在，全局变量在事件表中显示为一行。它位于此事件表中，但可以从任何布局中的任何事件表访问它。

Score全局变量。  
注意：还有一些局部变量只能通过较小的“范围”事件来访问，但我们现在不需要担心。

让我们给玩家一个杀死怪物的点。在我们的 “Monster：health less or equal 0” 事件中（当怪物死亡时），单击Add action，然后选择System - > Add to（在Global和local variables下） - > Score，value 1。现在该事件应如下所示：  

![](https://www.scirra.com/images/articles/scoreeevent.png)

该活动给予玩家一些分数。  
现在玩家有一个分数，对于他们杀死的每个怪物都会增加1分 - 但他们看不到他们的分数！让我们用文本对象向他们展示。

#### 创建抬头显示器（HUD）
平视显示器（也称为HUD）是显示玩家在游戏中的健康，得分和其他信息的界面。让我们从文本对象中制作一个非常简单的HUD。

HUD始终保持在屏幕上的相同位置。如果我们有一些界面对象，我们不希望它们随着玩家走动而滚动 - 它们应该留在屏幕上。默认情况下，图层滚动。要将它们保留在屏幕上，我们可以使用图层Parallax设置。视差允许不同的层以不同的速率滚动以实现一种半3D效果。但是，如果我们将视差设置为零，那么该层根本不会滚动 - 非常适合HUD。

回到我们之前使用的图层栏。添加一个名为HUD的新图层。确保它位于顶部并选中（记住这使它成为活动层）。属性栏现在应该显示其属性。将Parallax属性设置为0,0（在X和Y轴上均为零）。

双击空格以插入另一个对象。这次选择Text对象。将其放在布局的左上角。很难看出它是否是黑色的，所以在属性栏中，使其变为粗体，斜体，黄色，并选择稍大的字体大小。将其大小调整到足以容纳合理数量的文本。它应该看起来像这样：  

![](https://www.scirra.com/images/articles/textinlayout.png)

插入的Text对象。  
切换回活动表。让我们用播放器的分数更新文本。在我们之前添加的Every tick事件中，添加操作Text - > Set text。

使用＆运算符，我们可以将数字转换为文本并将其连接到另一个文本字符串。因此，对于文本，请输入：

“得分：”和得分

第一部分（“分数”）是指文本将总是以这句话开始得分：。第二部分（Score）是Score全局变量的实际值。在与到一个文本段一起加入他们。

运行游戏，拍摄一些怪物。您的分数会显示，并且会保留在屏幕上的相同位置！

完成接触  
我们差不多完成了。让我们添加一些最后的润色。

首先，让我们有一些怪物经常产卵，否则一旦你射杀了所有的怪物，就没有什么可做的了。我们将每3秒创建一个新怪物。添加新活动：

条件：系统 - > 每X秒 - > 3  
动作：系统 - > 创建对象 - > 怪物，第1层，1400（对于X），随机（1024）（对于Y）

1400是紧邻布局右边缘的X坐标，随机（1024）是随机Y坐标布局的高度。

最后，让鬼魂杀死玩家。

条件：怪物 - > 与另一个物体碰撞 - > 玩家
动作：玩家 - > 摧毁

  
## ***恭喜，您已完成本教程的全部内容，并在 Construct 2 中制作了第一个HTML5游戏！***


